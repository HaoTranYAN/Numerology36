{"version":3,"sources":["file:///Volumes/D/YAN/Numerology36/assets/script/Settings.ts"],"names":["_decorator","Component","Node","director","Label","Sprite","sys","native","AudioManager","Languages","i18n","ccclass","property","Settings","onLoad","start","checkPlayMusic","initLayout","update","deltaTime","bgChooseLanguage","node","active","updateLayoutMusic","updateLayoutSound","updateLayoutLanguage","loadVersionTitle","setTimeout","preloadScene","clickChangeStateMusic","getMusic","setMusic","pauseMusic","playSoundClick","clickChangeStateSound","getSound","setSound","btnOffMusic","btnOnMusic","btnOffSound","btnOnSound","language","getLanguage","imgCheckEN","imgCheckVN","lblTitleLanguage","string","showPopupChooseLanguage","hidePopupChooseLanguage","chooseLanguageVN","updateLanguage","init","updateSceneRenderers","chooseLanguageEN","loadHome","loadScene","loadProfile","loadIntro","versionName","os","OS","ANDROID","className","methodName","methodSignature","reflection","callStaticMethod","IOS","lblTitleVersion","showRate","openURL","showFeedback","ret","shareApp"],"mappings":"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","sourcesContent":["import {\n  _decorator,\n  Component,\n  Node,\n  director,\n  Label,\n  Sprite,\n  sys,\n  native,\n  Button,\n  SpriteFrame,\n} from \"cc\";\nconst { ccclass, property } = _decorator;\nimport { AudioManager } from \"../common/AudioManager\";\nimport { Languages } from \"../common/Language\";\nimport * as i18n from \"db://i18n/LanguageData\";\n\n@ccclass(\"Settings\")\nexport class Settings extends Component {\n  @property(Sprite)\n  imgCheckVN: Sprite | null = null;\n\n  @property(Sprite)\n  imgCheckEN: Sprite | null = null;\n\n  @property(Sprite)\n  bgChooseLanguage: Sprite | null = null;\n\n  @property(Label)\n  lblTitleLanguage: Label | null = null;\n\n  @property(Label)\n  lblTitleVersion: Label | null = null;\n\n  @property(Node)\n  btnOnMusic: Node | null = null;\n\n  @property(Node)\n  btnOffMusic: Node | null = null;\n\n  @property(Node)\n  btnOnSound: Node | null = null;\n\n  @property(Node)\n  btnOffSound: Node | null = null;\n\n  onLoad() {}\n\n  start() {\n    AudioManager.checkPlayMusic();\n    this.initLayout();\n  }\n\n  update(deltaTime: number) {}\n\n  initLayout() {\n    this.bgChooseLanguage.node.active = false;\n    this.updateLayoutMusic();\n    this.updateLayoutSound();\n    this.updateLayoutLanguage();\n    this.loadVersionTitle();\n\n\n    setTimeout(() => {\n      this.preloadScene();\n    }, 50);\n  \n  \n  \n    }\n  \n    preloadScene(){\n      director.preloadScene(\"Home\",function(){})\n      director.preloadScene(\"Profile\",function(){})\n      director.preloadScene(\"Intro\",function(){})\n\n  \n    }\n\n  clickChangeStateMusic() {\n    if (AudioManager.getMusic() === \"true\") {\n      AudioManager.setMusic(\"false\");\n\n      AudioManager.pauseMusic();\n    } else {\n      AudioManager.setMusic(\"true\");\n      AudioManager.checkPlayMusic();\n    }\n    this.updateLayoutMusic();\n    AudioManager.playSoundClick();\n  }\n  clickChangeStateSound() {\n    if (AudioManager.getSound() === \"true\") {\n      AudioManager.setSound(\"false\");\n    } else {\n      AudioManager.setSound(\"true\");\n    }\n    this.updateLayoutSound();\n    AudioManager.playSoundClick();\n  }\n\n  updateLayoutMusic() {\n    if (AudioManager.getMusic() === \"true\") {\n      this.btnOffMusic.active = false;\n      this.btnOnMusic.active = true;\n    } else {\n      this.btnOffMusic.active = true;\n      this.btnOnMusic.active = false;\n    }\n  }\n\n  updateLayoutSound() {\n    if (AudioManager.getSound() === \"true\") {\n      this.btnOffSound.active = false;\n      this.btnOnSound.active = true;\n    } else {\n      this.btnOffSound.active = true;\n      this.btnOnSound.active = false;\n    }\n  }\n\n  updateLayoutLanguage() {\n    var language = Languages.getLanguage();\n    if (language == \"vi\") {\n      this.imgCheckEN.node.active = false;\n      this.imgCheckVN.node.active = true;\n      this.lblTitleLanguage.string = \"Tiếng Việt\";\n    } else {\n      this.imgCheckEN.node.active = true;\n      this.imgCheckVN.node.active = false;\n      this.lblTitleLanguage.string = \"English\";\n    }\n  }\n\n  showPopupChooseLanguage() {\n    this.bgChooseLanguage.node.active = !this.bgChooseLanguage.node.active;\n  }\n\n  hidePopupChooseLanguage() {\n    this.bgChooseLanguage.node.active = false;\n  }\n\n  chooseLanguageVN() {\n    AudioManager.playSoundClick();\n\n    var language = Languages.getLanguage();\n    if (language != \"vi\") {\n      Languages.updateLanguage(\"vi\");\n      i18n.init(\"vi\");\n      i18n.updateSceneRenderers();\n      this.updateLayoutLanguage();\n    }\n    this.hidePopupChooseLanguage();\n  }\n\n  chooseLanguageEN() {\n    AudioManager.playSoundClick();\n\n    var language = Languages.getLanguage();\n    if (language != \"en\") {\n      Languages.updateLanguage(\"en\");\n      i18n.init(\"en\");\n      i18n.updateSceneRenderers();\n      this.updateLayoutLanguage();\n    }\n    this.hidePopupChooseLanguage();\n  }\n\n  loadHome() {\n    AudioManager.playSoundClick();\n\n    director.loadScene(\"Home\");\n  }\n  loadProfile() {\n    AudioManager.playSoundClick();\n\n    director.loadScene(\"Profile\");\n  }\n\n  loadIntro() {\n    AudioManager.playSoundClick();\n\n    director.loadScene(\"Intro\");\n  }\n\n  loadVersionTitle() {\n    var versionName: string = \"1.0.0(1)\";\n    if (sys.os == sys.OS.ANDROID) {\n      let className = \"org/cocos2dx/javascript/AppActivity\";\n      let methodName = \"loadVersionName\";\n      let methodSignature = \"()Ljava/lang/String;\";\n      versionName = native.reflection.callStaticMethod(\n        className,\n        methodName,\n        methodSignature\n      );\n    } else if (sys.os == sys.OS.IOS) {\n      versionName = native.reflection.callStaticMethod(\n        \"AppController\",\n        \"loadVersionName:\",\n        \"Numberlogy\"\n      );\n    }\n    this.lblTitleVersion.string = versionName;\n  }\n\n  showRate() {\n    AudioManager.playSoundClick();\n\n    if (sys.os == sys.OS.IOS)\n      sys.openURL(\"https://apps.apple.com/us/app/id1612404166\");\n    else if (sys.os === sys.OS.ANDROID)\n      sys.openURL(\n        \"https://play.google.com/store/apps/details?id=net.tuviphongthuy.numerology\"\n      );\n  }\n  showFeedback() {\n    AudioManager.playSoundClick();\n\n    if (sys.os == sys.OS.ANDROID) {\n      let className = \"org/cocos2dx/javascript/AppActivity\";\n      let methodName = \"sendMailWithSubject\";\n      let methodSignature = \"(Ljava/lang/String;Ljava/lang/String;)V\";\n      native.reflection.callStaticMethod(\n        className,\n        methodName,\n        methodSignature,\n        \"Numerology Android Feedback\",\n        \"apps@yan.vn\"\n      );\n    } else if (sys.os == sys.OS.IOS) {\n      var ret = native.reflection.callStaticMethod(\n        \"AppController\",\n        \"sendMailWithSubject:andMail:\",\n        \"Numerology iOS Feedback\",\n        \"apps@yan.vn\"\n      );\n    }\n  }\n  shareApp() {\n    AudioManager.playSoundClick();\n\n    // //We will add Facebook Instant share later\n    // // if (typeof FBInstant === \"undefined\") {\n    // //this.bottomNode.active = false;\n    if (sys.os == sys.OS.ANDROID) {\n      let className = \"org/cocos2dx/javascript/AppActivity\";\n      let methodName = \"shareApp\";\n      let methodSignature = \"()V\";\n      native.reflection.callStaticMethod(\n        className,\n        methodName,\n        methodSignature\n      );\n    } else if (sys.os == sys.OS.IOS) {\n      var ret = native.reflection.callStaticMethod(\n        \"AppController\",\n        \"shareApp:\",\n        \"\"\n      );\n    }\n    // //  }\n    // //  else {\n    // //   this.node.getComponent(\"Share\").shareFacebook();\n    // // }\n  }\n}\n"]}