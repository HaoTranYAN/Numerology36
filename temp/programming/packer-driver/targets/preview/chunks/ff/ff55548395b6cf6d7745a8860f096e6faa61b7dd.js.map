{"version":3,"sources":["file:///Users/haothanhit/Desktop/ThanSoHocV2/Numerology36/assets/script/Detail.ts"],"names":["_decorator","Component","Node","RichText","Label","Prefab","ScrollView","director","sys","instantiate","AudioManager","Languages","i18n","Constant","TypeAction","CommonTS","ccclass","property","Detail","onLoad","initLayout","start","update","deltaTime","checkPlayMusic","hideDialogInfo","tinhNumber","language","getLanguage","init","dataUser","JSON","parse","localStorage","getItem","PERSONAL","indexByName","tinhSoTheoTen","nameText","nameDestiny","tinhNameDestiny","soChuDao","tinhSoChuDao","soDuongDoi","tinhSoDuongDoi","date","Date","namCaNhan","tinhPersonalDay","yearForecast","period","tinhGiaiDoan","karmicDebt","window","KARMIC_DEBT","loadDataKarmic","loadData","lblTitle","string","toUpperCase","updateSceneRenderers","number","RULING_NUMBER","t","PERSONAL_YEAR","getFullYear","DESTINY","LIFE_PATH","PERIOD1","gd1","PERIOD2","gd2","PERIOD3","gd3","addPrefab","len","length","addPrefabCountNumber","toString","replace","i","dataNumber","nodeText","prefabCountNumber","name","cell","getComponent","updateData","typeNumber","content","addChild","str","prefabDetailYourNumber","updateCell","clickInfo","playSoundClick","bgInfo","active","showDialogInfo","loadHome","loadScene","loadPeriodCycle"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, RichText, Label, Prefab, ScrollView, director, sys, instantiate } from 'cc';\nconst { ccclass, property } = _decorator;\nimport { AudioManager } from \"../common/AudioManager\";\nimport { Languages } from \"../common/Language\";\nimport * as i18n from \"db://i18n/LanguageData\";\nimport { Constant, TypeAction } from '../common/Constant';\nimport { CommonTS } from '../common/CommonTS';\n@ccclass('Detail')\nexport class Detail extends Component {\n\n    @property(RichText)\n    richTextContentInfo: RichText |null =null;\n\n    @property(Label)\n    lblTitle: Label |null =null;\n\n    @property(Label)\n    lblTitleInfo: Label |null =null;\n\n    @property(Node)\n    content: Node = null;\n\n    @property(Prefab)\n    prefabTools: Prefab = null;\n   \n    @property(Prefab)\n    prefabMainNumbers: Prefab = null;\n\n    @property(Prefab)\n    prefabPeriod: Prefab = null;\n\n    @property(ScrollView)\n    scrollView: ScrollView = null;\n\n    @property(Node)\n    bgInfo: Node = null;\n\n\n    @property(Prefab)\n    prefabDetailYourNumber: Prefab = null;\n\n    @property(Prefab)\n    prefabCountNumber: Prefab = null;\n\n    \n    onLoad(){\n        this.initLayout()\n    }\n    start() {\n\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n\n    initLayout(){\n        AudioManager.checkPlayMusic();\n        this.hideDialogInfo();\n        this.tinhNumber();\n\n\n\n    }\n\n    tinhNumber() {\n        var language = Languages.getLanguage();\n        i18n.init(language);\n\n        var dataUser = JSON.parse(sys.localStorage.getItem(Constant.PERSONAL));\n        var indexByName = CommonTS.tinhSoTheoTen(dataUser.nameText);\n        var nameDestiny =  CommonTS.tinhNameDestiny(dataUser.nameText);\n        var soChuDao = CommonTS.tinhSoChuDao(dataUser);\n        var soDuongDoi = CommonTS.tinhSoDuongDoi(dataUser);\n        var date = new Date();\n        var namCaNhan = CommonTS.tinhPersonalDay(dataUser, date).yearForecast;\n        var period = CommonTS.tinhGiaiDoan(dataUser);\n        var karmicDebt = CommonTS.karmicDebt(dataUser);\n        // var karmicLesson = common.karmicLesson(dataUser.nameText);\n        \n    \n        if (window[\"typeAction\"] ==TypeAction.KARMIC_DEBT) {\n          this.loadDataKarmic(karmicDebt);\n        } else {\n          this.loadData(\n            soChuDao,\n            soDuongDoi,\n            namCaNhan,\n            period,\n            indexByName,\n            nameDestiny\n          );\n        }\n        this.lblTitle.string.toUpperCase();\n        i18n.updateSceneRenderers()\n      }\n\n      loadData(soChuDao, soDuongDoi, namCaNhan, period, indexByName, nameDestiny) {\n        var number = 0;\n        var date = new Date();\n        switch (window[\"typeAction\"]) {\n          case TypeAction.RULING_NUMBER:\n            // code block\n            number = soChuDao;\n            this.lblTitle.string = i18n.t(\"MASTERNUMBER\");\n            break;\n          case TypeAction.PERSONAL_YEAR:\n            // code block\n            number = namCaNhan;\n            this.lblTitle.string = i18n.t(\"PERSONALYEAR\") +\" \" +date.getFullYear();\n            break;\n    \n          case TypeAction.DESTINY:\n            number = nameDestiny;\n            this.lblTitle.string = i18n.t(\"DESTINY\");\n            // code block\n            break;\n          case TypeAction.LIFE_PATH:\n            number = soDuongDoi;\n            this.lblTitle.string = i18n.t(\"LIFEPATH\");\n            break;\n          case TypeAction.PERIOD1:\n            number = period.gd1;\n            this.lblTitle.string = i18n.t(\"PERIOD1\");\n            break;\n          case TypeAction.PERIOD2:\n            number = period.gd2;\n            this.lblTitle.string = i18n.t(\"PERIOD2\");\n            break;\n          case TypeAction.PERIOD3:\n            number = period.gd3;\n            this.lblTitle.string = i18n.t(\"PERIOD3\");\n            break;\n          default:\n          // code block\n        }\n        this.addPrefab(number);\n      }\n    \n\n\n      loadDataKarmic(karmicDebt) {\n\n        this.lblTitle.string = i18n.t(\"KARMICDEBT\");\n\n            var len = karmicDebt.length;\n            if (len == 0) {\n              this.addPrefabCountNumber(\"0\");\n            } else {\n              this.addPrefabCountNumber(karmicDebt.toString().replace(/,/g,\", \"));\n              for (let i = 0; i < len; i++) {\n                this.addPrefab(karmicDebt[i]);\n              }\n            }\n      }\n\n\n      addPrefab(dataNumber) {\n        var nodeText =  instantiate(this.prefabCountNumber);\n        nodeText.name = \"nodeDetailYourNumber\";\n        var cell = nodeText.getComponent(\"nodeDetailYourNumber\");\n        cell.updateData(dataNumber, typeNumber);\n        this.content.addChild(nodeText);\n      }\n\n\n  addPrefabCountNumber(str) {\n    var nodeText = instantiate(this.prefabDetailYourNumber);\n    nodeText.name = \"nodeCountNumber\";\n    var cell = nodeText.getComponent(\"nodeCountNumber\");\n    cell.updateCell(str, typeNumber);\n    this.content.addChild(nodeText);\n  }\n\n\n\n    clickInfo(){\n        AudioManager.playSoundClick();\n        this.bgInfo.active==true? this.hideDialogInfo() : this.showDialogInfo()\n    }\n\n    hideDialogInfo(){\n\nthis.bgInfo.active=false\n    }\n\n    showDialogInfo(){\n        this.bgInfo.active=true\n\n    }\n\n    loadHome(){\n        AudioManager.playSoundClick();\n\n        director.loadScene(\"Home\")\n    }\n\n    loadPeriodCycle(){\n        AudioManager.playSoundClick();\n\n        director.loadScene(\"PeriodCycle\")\n    }\n}\n\n "]}