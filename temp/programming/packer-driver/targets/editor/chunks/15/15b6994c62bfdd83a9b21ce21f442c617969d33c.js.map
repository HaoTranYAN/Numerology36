{"version":3,"sources":["file:///Users/haothanhit/Desktop/ThanSoHocV2/Numerology36/assets/script/Settings.ts"],"names":["_decorator","Component","Node","director","Label","Sprite","sys","native","AudioManager","Languages","i18n","ccclass","property","Settings","onLoad","checkPlayMusic","initLayout","start","update","deltaTime","bgChooseLanguage","node","active","updateLayoutLanguage","loadVersionTitle","updateLayoutMusic","updateLayoutSound","clickChangeStateMusic","getMusic","setMusic","pauseMusic","playSoundClick","clickChangeStateSound","getSound","setSound","btnOffMusic","btnOnMusic","btnOffSound","btnOnSound","language","getLanguage","imgCheckEN","imgCheckVN","lblTitleLanguage","string","showPopupChooseLanguage","hidePopupChooseLanguage","chooseLanguageVN","updateLanguage","init","updateSceneRenderers","chooseLanguageEN","loadHome","loadScene","loadProfile","loadIntro","versionName","os","OS","ANDROID","className","methodName","methodSignature","reflection","callStaticMethod","IOS","lblTitleVersion","showRate","openURL","showFeedback","ret","shareApp"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, director, Label, Sprite, sys,native, Button, SpriteFrame } from \"cc\";\nconst { ccclass, property } = _decorator;\nimport { AudioManager } from \"../common/AudioManager\";\nimport { Languages } from \"../common/Language\";\nimport * as i18n from \"db://i18n/LanguageData\";\n\n@ccclass(\"Settings\")\nexport class Settings extends Component {\n  @property(Sprite)\n  imgCheckVN: Sprite | null = null;\n\n  @property(Sprite)\n  imgCheckEN: Sprite | null = null;\n\n  @property(Sprite)\n  bgChooseLanguage: Sprite | null = null;\n\n  @property(Label)\n  lblTitleLanguage: Label | null = null;\n\n  @property(Label)\n  lblTitleVersion: Label | null = null;\n\n  @property(Node)\n  btnOnMusic: Node | null = null;\n\n  @property(Node)\n  btnOffMusic: Node | null = null;\n\n  @property(Node)\n  btnOnSound: Node | null = null;\n\n  @property(Node)\n  btnOffSound: Node | null = null;\n\n\n\n\n  onLoad() {\n    AudioManager.checkPlayMusic();\n    this.initLayout();\n  }\n\n  start() {\n \n  }\n\n  update(deltaTime: number) {}\n\n  initLayout() {\n    this.bgChooseLanguage.node.active = false;\n    this.updateLayoutLanguage();\n    this.loadVersionTitle();\n    \n    this.updateLayoutMusic()\n    this.updateLayoutSound()   \n \n\n\n  }\n\n  clickChangeStateMusic(){\n    if(AudioManager.getMusic()===\"true\"){\n        AudioManager.setMusic(\"false\")\n\n        AudioManager.pauseMusic()\n\n    }else{\n        AudioManager.setMusic(\"true\")\n        AudioManager.checkPlayMusic();\n\n    }\n    this.updateLayoutMusic()\n    AudioManager.playSoundClick();\n\n\n  }\n  clickChangeStateSound(){\n    if(AudioManager.getSound()===\"true\"){\n        AudioManager.setSound(\"false\")\n\n    }else{\n        AudioManager.setSound(\"true\")\n    }\n    this.updateLayoutSound()\n    AudioManager.playSoundClick();\n\n  }\n\n  updateLayoutMusic(){\n\n    if(AudioManager.getMusic()===\"true\"){\n      this.btnOffMusic.active=false\n      this.btnOnMusic.active=true\n\n    }else{\n      this.btnOffMusic.active=true\n      this.btnOnMusic.active=false\n\n    }\n\n\n  }\n\n  updateLayoutSound(){\n\n    if(AudioManager.getSound()===\"true\"){\n      this.btnOffSound.active=false\n      this.btnOnSound.active=true\n\n    }else{\n      this.btnOffSound.active=true\n      this.btnOnSound.active=false\n\n    }\n\n\n}\n\n  updateLayoutLanguage() {\n    var language = Languages.getLanguage();\n    if (language == \"vi\") {\n      this.imgCheckEN.node.active = false;\n      this.imgCheckVN.node.active = true;\n      this.lblTitleLanguage.string = \"Tiếng Việt\";\n    } else {\n      this.imgCheckEN.node.active = true;\n      this.imgCheckVN.node.active = false;\n      this.lblTitleLanguage.string = \"English\";\n    }\n  }\n\n  showPopupChooseLanguage() {\n  \n    this.bgChooseLanguage.node.active=!this.bgChooseLanguage.node.active\n\n  }\n\n  hidePopupChooseLanguage() {\n    this.bgChooseLanguage.node.active = false;\n  }\n\n  chooseLanguageVN() {\n    AudioManager.playSoundClick();\n\n    var language = Languages.getLanguage();\n    if (language != \"vi\") {\n      Languages.updateLanguage(\"vi\");\n      i18n.init(\"vi\");\n      i18n.updateSceneRenderers();\n      this.updateLayoutLanguage();\n    }\n    this.hidePopupChooseLanguage();\n  }\n\n  chooseLanguageEN() {\n    AudioManager.playSoundClick();\n\n    var language = Languages.getLanguage();\n    if (language != \"en\") {\n      Languages.updateLanguage(\"en\");\n      i18n.init(\"en\");\n      i18n.updateSceneRenderers();\n      this.updateLayoutLanguage();\n    }\n    this.hidePopupChooseLanguage();\n  }\n\n  loadHome() {\n    AudioManager.playSoundClick();\n\n    director.loadScene(\"Home\");\n  }\n  loadProfile(){\n    AudioManager.playSoundClick();\n\n    director.loadScene(\"Profile\");\n\n}\n\nloadIntro() {\n    AudioManager.playSoundClick();\n\n    director.loadScene(\"Intro\");\n  }\n\nloadVersionTitle(){\n    var versionName: string = \"1.0.0(1)\";\n    if (sys.os == sys.OS.ANDROID) {\n      let className = \"org/cocos2dx/javascript/AppActivity\";\n      let methodName = \"loadVersionName\";\n      let methodSignature = \"()Ljava/lang/String;\";\n      versionName = native.reflection.callStaticMethod(className, methodName, methodSignature);\n    } else if (sys.os == sys.OS.IOS) {\n      versionName = native.reflection.callStaticMethod(\"AppController\",\n                                         \"loadVersionName:\",\n                                         \"Numberlogy\",\n                                          );\n    }\n    this.lblTitleVersion.string = versionName;\n\n  }\n\nshowRate() {\n    AudioManager.playSoundClick();\n\n    if(sys.os == sys.OS.IOS) sys.openURL(\"https://apps.apple.com/us/app/id1612404166\");\n    else if(sys.os === sys.OS.ANDROID) sys.openURL(\"https://play.google.com/store/apps/details?id=net.tuviphongthuy.numerology\");\n  }\n  showFeedback() {\n\n    AudioManager.playSoundClick();\n\n    if (sys.os == sys.OS.ANDROID) {\n    let className = \"org/cocos2dx/javascript/AppActivity\";\n    let methodName = \"sendMailWithSubject\";\n    let methodSignature = \"(Ljava/lang/String;Ljava/lang/String;)V\";\n    native.reflection.callStaticMethod(className, methodName, methodSignature, \"Numerology Android Feedback\", \"apps@yan.vn\");\n    } else if (sys.os == sys.OS.IOS) {\n    var ret = native.reflection.callStaticMethod(\"AppController\",\n    \"sendMailWithSubject:andMail:\",\n    \"Numerology iOS Feedback\",\n    \"apps@yan.vn\");\n    }\n\n  }\n  shareApp() {\n    AudioManager.playSoundClick();\n\n// //We will add Facebook Instant share later\n// // if (typeof FBInstant === \"undefined\") {\n// //this.bottomNode.active = false;\n    if (sys.os == sys.OS.ANDROID) {\n    let className = \"org/cocos2dx/javascript/AppActivity\";\n    let methodName = \"shareApp\";\n    let methodSignature = \"()V\";\n    native.reflection.callStaticMethod(className, methodName, methodSignature);\n    } else if (sys.os == sys.OS.IOS) {\n    var ret = native.reflection.callStaticMethod(\"AppController\",\n    \"shareApp:\",\"\");\n    }\n// //  }\n// //  else {\n// //   this.node.getComponent(\"Share\").shareFacebook();\n// // }\n  }\n\n}\n"]}