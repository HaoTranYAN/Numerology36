{"version":3,"sources":["file:///Users/haothanhit/Desktop/ThanSoHocV2/Numerology36/assets/script/PhoneAddess.ts"],"names":["_decorator","Component","Node","Button","Sprite","RichText","EditBox","Label","director","Prefab","instantiate","ScrollView","sys","AudioManager","Languages","i18n","Constant","TypeAction","CommonTS","ccclass","property","PhoneAddess","onLoad","initLayout","start","update","deltaTime","checkPlayMusic","hideWarning","language","getLanguage","init","window","PHONE","lblTitle","string","t","richTextDescription","lblPlaceholder","imgAddress","node","active","imgPhone","mobile","localStorage","getItem","MOBILE","edtInput","addPrefabContent","tinhNumber","scrollView","scrollToBottom","ADDRESS","address","tinhSoDiaChi","updateSceneRenderers","addPrefabTools","str","mobileNumber","toString","split","format","total","i","length","test","parseInt","tinhTong","number","type","nodeText","parentNode","getChildByName","cc","dataMobile","name","addChild","cell","getComponent","updateData","numberMobile","prefabTools","content","lblWarning","showWarning","loadHome","playSoundClick","loadScene"],"mappings":"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","sourcesContent":["import {\n  _decorator,\n  Component,\n  Node,\n  Button,\n  Sprite,\n  RichText,\n  EditBox,\n  Label,\n  director,\n  Prefab,\n  instantiate,\n  ScrollView,\n  sys,\n} from \"cc\";\n\nimport { AudioManager } from \"../common/AudioManager\";\nimport { Languages } from \"../common/Language\";\nimport * as i18n from \"db://i18n/LanguageData\";\nimport { Constant, TypeAction } from \"../common/Constant\";\nimport { CommonTS } from \"../common/CommonTS\";\nconst { ccclass, property } = _decorator;\n\n@ccclass(\"PhoneAddess\")\nexport class PhoneAddess extends Component {\n  @property(Button)\n  btnClose: Button = null;\n\n  @property(Button)\n  btnResult: Button = null;\n\n  @property(Sprite)\n  imgPhone: Sprite = null;\n\n  @property(Sprite)\n  imgAddress: Sprite = null;\n\n  @property(RichText)\n  richTextDescription: RichText = null;\n\n  @property(EditBox)\n  edtInput: EditBox = null;\n\n  @property(Label)\n  lblWarning: Label = null;\n\n  @property(Label)\n  lblTitle: Label = null;\n\n  @property(Label)\n  lblPlaceholder: Label = null;\n\n  @property(Prefab)\n  prefabTools: Prefab = null;\n\n  @property(Node)\n  content: Node = null;\n\n  @property(ScrollView)\n  scrollView: ScrollView = null;\n\n  onLoad() {\n\n    this.initLayout()\n  }\n\n  start() {}\n\n \n\n  update(deltaTime: number) {}\n\n  initLayout(){\n\n    AudioManager.checkPlayMusic();\n\n    this.hideWarning()\n\n\n    var language = Languages.getLanguage();\n    i18n.init(language);\n    \n    if(window[\"typeAction\"] == TypeAction.PHONE) {\n        this.lblTitle.string = i18n.t('PHONETITLE');\n        this.richTextDescription.string = i18n.t('INTROPHONE');\n        this.lblPlaceholder.string = i18n.t('ENTERYOURPHONE');\n        this.imgAddress.node.active=false\n        this.imgPhone.node.active=true\n\n        var mobile = sys.localStorage.getItem(Constant.MOBILE);\n        if(mobile != null) {\n          this.edtInput.string = mobile;\n          this.addPrefabContent(this.tinhNumber(mobile), TypeAction.PHONE);\n          this.scrollView.scrollToBottom(0.5);\n         //  this.scrollView.scrollToPercentVertical(0.8);\n \n        }\n      }\n\n     else\n      if(window[\"typeAction\"] == TypeAction.ADDRESS) {\n        this.lblTitle.string = i18n.t('ADDRESSTITLE');\n        this.richTextDescription.string = i18n.t('INTROADDRESS');\n        this.lblPlaceholder.string = i18n.t('ENTERYOURADDRESS');\n        this.imgAddress.node.active=true\n        this.imgPhone.node.active=false\n\n        var address = sys.localStorage.getItem(Constant.ADDRESS);\n        if(address != null) {\n          this.edtInput.string = address;\n          this.addPrefabContent(CommonTS.tinhSoDiaChi(address), TypeAction.ADDRESS);\n          this.scrollView.scrollToBottom(0.5);\n        }\n      }\n\n    i18n.updateSceneRenderers();\n\n    this.addPrefabTools()\n    \n}\n\ntinhNumber(str) {\n    //console.log(\"tinhNumber\");\n    var mobileNumber = str.toString().split(\"\");\n    var format = /[0-9]+/;\n    var total = 0;\n    for (let i = 0; i < mobileNumber.length; i++) {\n        if(format.test(mobileNumber[i])) {\n          total = total + parseInt(mobileNumber[i]);\n        } else {\n          //kh xu ly;\n        }\n    }\n    while (total > 9 && total != 11 && total != 22 && total != 33) {\n      total = CommonTS.tinhTong(total);\n    }\n\n    return total;\n  }\n\naddPrefabContent(number:number, type:TypeAction) {\n\n    var nodeText = this.parentNode.getChildByName(\"dataMobile\");\n    if (nodeText == null) {\n      var nodeText = cc.instantiate(this.dataMobile);\n      nodeText.name = \"dataMobile\";\n      this.parentNode.addChild(nodeText);\n    } else {\n      nodeText.active = true;\n    }\n    var cell = nodeText.getComponent(\"DataMobile\");\n    cell.updateData(numberMobile, type);\n    \n  }\n\naddPrefabTools() {\n    var node = instantiate(this.prefabTools);\n    node.name = \"nodeTools\";\n    this.content.addChild(node);\n  }\n\nhideWarning(){\n    this.lblWarning.node.active=false\n\n}\n\nshowWarning(){\n    this.lblWarning.node.active=true\n\n}\n  \n loadHome(){\n    AudioManager.playSoundClick();\n\n    director.loadScene(\"Home\")\n }\n\n}\n"]}